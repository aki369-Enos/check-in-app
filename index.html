<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>é»åç³»çµ±è¨ºæ–·ä¸­</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 p-8">
    <div class="max-w-md mx-auto bg-white p-6 rounded-2xl shadow-lg">
        <h1 class="text-xl font-bold mb-4">ç³»çµ±ç‹€æ…‹æª¢æŸ¥</h1>
        <div id="status-box" class="p-4 bg-yellow-50 text-yellow-700 rounded-lg animate-pulse">
            æ­£åœ¨å˜—è©¦é€£ç·šè‡³ Google é›²ç«¯...
        </div>
        <div id="debug-info" class="mt-4 text-xs text-gray-400 font-mono break-all"></div>
        <div id="main-content" class="hidden mt-6">
            <p class="text-green-600 font-bold">âœ… é€£ç·šæˆåŠŸï¼æ­£åœ¨è¼‰å…¥åå–®...</p>
        </div>
    </div>

    <script>
        // å¼·åˆ¶åŠ ä¸Šç‰ˆæœ¬è™Ÿé¿å…å¿«å–
        const API_URL = 'https://script.google.com/macros/s/AKfycbzKcI4QzTbRJ9BNON-zEWx_hH-4_ooyiPz6WaZFmCa6I7uxuHHKxxNWNY3BfQ62wtuo/exec?cache=' + Date.now();
        
        async function checkSystem() {
            const statusBox = document.getElementById('status-box');
            const debugInfo = document.getElementById('debug-info');
            debugInfo.innerText = "é€£ç·šç¶²å€: " + API_URL;

            try {
                // å˜—è©¦æŠ“å–è³‡æ–™
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error("Google å›å‚³éŒ¯èª¤ä»£ç¢¼: " + response.status);
                
                const data = await response.json();
                statusBox.className = "p-4 bg-green-50 text-green-700 rounded-lg";
                statusBox.innerText = "ğŸ‰ é€£ç·šå®Œå…¨æ­£å¸¸ï¼";
                document.getElementById('main-content').classList.remove('hidden');
                console.log("æ”¶åˆ°çš„è³‡æ–™:", data);
            } catch (err) {
                statusBox.className = "p-4 bg-red-50 text-red-700 rounded-lg";
                statusBox.innerHTML = "âŒ é€£ç·šå¤±æ•—<br><span class='text-sm'>" + err.message + "</span>";
                debugInfo.innerHTML += "<br><br>éŒ¯èª¤è©³æƒ…: é€™é€šå¸¸æ˜¯å› ç‚º GAS éƒ¨ç½²å¾Œã€èª°å¯ä»¥å­˜å–ã€æ²’è¨­ç‚ºã€æ‰€æœ‰äººã€ï¼Œæˆ–æ˜¯ç¶²å€è²¼éŒ¯äº†ã€‚";
            }
        }
        window.onload = checkSystem;
    </script>
</body>
</html>
